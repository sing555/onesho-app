<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Cache Control -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <title>ãƒˆã‚¤ãƒ¬ãã‚ã - ã´ã‹ã´ã‹ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°</title>
    <meta name="description" content="ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ã„ãƒˆã‚¤ãƒ¬è¨˜éŒ²ã‚¢ãƒ—ãƒªã€‚ãŠå­æ§˜ã®ç”Ÿæ´»ãƒªã‚ºãƒ ã‚’æŠŠæ¡ã—ã€ãŠã­ã—ã‚‡å’æ¥­ã‚’ã‚µãƒãƒ¼ãƒˆã€‚">

    <!-- PWA Settings -->
    <meta name="theme-color" content="#72c6ef">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Styles & Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Kiwi+Maru:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDK (Version 10+) -->
    <script type="importmap">
    {
      "imports": {
        "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
        "firebase/auth": "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js",
        "firebase/firestore": "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js",
        "firebase/analytics": "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js"
      }
    }
    </script>
</head>

<body>
    <!-- ãƒ­ã‚°ã‚¤ãƒ³ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-card animate-pop">
            <h1>â˜€ï¸ ãƒˆã‚¤ãƒ¬ãã‚ã</h1>
            <p>ãƒ‡ãƒ¼ã‚¿ã‚’å®‰å…¨ã«ã®ã“ã™ãŸã‚ã«<br>ãƒ­ã‚°ã‚¤ãƒ³ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
            <button id="btn-login" class="login-btn">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google icon">
                Googleã§ ãƒ­ã‚°ã‚¤ãƒ³
            </button>
            <button id="btn-guest" class="guest-link">ãƒ­ã‚°ã‚¤ãƒ³ã›ãšã« ã¯ã˜ã‚ã‚‹</button>

            <div class="auth-benefit">
                <p>âœ… ãƒ‘ãƒ‘ãƒ»ãƒãƒã®ã‚¹ãƒãƒ›ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰å¯èƒ½</p>
                <p>âœ… æ©Ÿç¨®å¤‰æ›´ã—ã¦ã‚‚è¨˜éŒ²ã¯æ¶ˆãˆã¾ã›ã‚“</p>
            </div>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div id="app-content" style="display: none;">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1 id="app-title">â˜€ï¸ ãƒˆã‚¤ãƒ¬ãã‚ã</h1>
                    <div id="user-info" class="user-info-text"></div>
                </div>
                <button id="btn-logout" class="logout-link">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            </div>
        </header>

        <div class="main-container">
            <!-- ã‚¯ã‚¤ãƒƒã‚¯å…¥åŠ› -->
            <section class="quick-card">
                <h3>ä»Šæ—¥ã®çŠ¶æ³</h3>
                <div class="quick-btns">
                    <button class="quick-btn success" onclick="quickLog('success')">
                        <span class="btn-main-text">â˜€ï¸ ã§ããŸï¼</span>
                        <span class="btn-sub-text">(ãƒˆã‚¤ãƒ¬ã§æˆåŠŸ)</span>
                    </button>
                    <button class="quick-btn fail" onclick="quickLog('fail')">
                        <span class="btn-main-text">ğŸŒ§ï¸ ãŠã‚‚ã‚‰ã—</span>
                        <span class="btn-sub-text">(ãŠã—ã„ï¼)</span>
                    </button>
                </div>
            </section>

            <!-- å±¥æ­´ -->
            <section class="history-card">
                <h3><span id="log-date-label">ãã‚‡ã†</span>ã® ãƒ­ã‚°</h3>
                <div id="log-list" class="log-list"></div>
            </section>

            <!-- è©³ç´°è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
            <section class="today-card">
                <h3>è©³ç´°ãª è¨˜éŒ²ãƒ»ä¿®æ­£</h3>
                <div class="form-group">
                    <label>ã²ã«ã¡</label>
                    <input type="date" id="input-date" class="modern-input">
                </div>
                <div class="form-group">
                    <label>ã˜ã‹ã‚“</label>
                    <input type="time" id="input-time" class="modern-input">
                </div>
                <div class="form-group">
                    <label>çŠ¶æ³</label>
                    <div class="btn-toggle-group" id="status-toggle">
                        <button class="toggle-btn active" data-value="success">â˜€ï¸ æˆåŠŸ</button>
                        <button class="toggle-btn" data-value="fail">ğŸŒ§ï¸ ãŠã‚‚ã‚‰ã—</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>é‡</label>
                    <div class="btn-toggle-group" id="amount-toggle">
                        <button class="toggle-btn" data-value="small">å°‘</button>
                        <button class="toggle-btn active" data-value="medium">ä¸­</button>
                        <button class="toggle-btn" data-value="large">å¤š</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>å°¿æ„</label>
                    <div class="btn-toggle-group" id="urge-toggle">
                        <button class="toggle-btn" data-value="yes">ã‚ã‚Š</button>
                        <button class="toggle-btn active" data-value="no">ãªã—</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>ãƒ¡ãƒ¢</label>
                    <input type="text" id="input-comment" placeholder="ãƒ¡ãƒ¢ã‚’æ®‹ã›ã¾ã™" class="modern-input">
                </div>
                <button class="submit-btn" id="btn-save">è¨˜éŒ²ã‚’ä¿å­˜ã™ã‚‹</button>
            </section>

            <!-- é€±é–“è¨ºæ–­ -->
            <section class="chart-card">
                <h3>é€±é–“ãƒªã‚ºãƒ ã® ã—ã‚“ã ã‚“</h3>
                <div class="analysis-tabs">
                    <button id="view-accident" class="tab-btn active"
                        onclick="setHeatmapView('accident')">ãŠã‚‚ã‚‰ã—åˆ†å¸ƒ</button>
                    <button id="view-rhythm" class="tab-btn" onclick="setHeatmapView('rhythm')">å…¨ãŠã—ã£ã“ãƒªã‚ºãƒ </button>
                </div>
                <div class="heatmap-wrapper">
                    <div id="heatmap-grid" class="heatmap-grid"></div>
                </div>
                <div class="heatmap-legend">
                    <span>ã™ããªã„</span>
                    <div class="legend-box level-0"></div>
                    <div class="legend-box level-1"></div>
                    <div class="legend-box level-2"></div>
                    <div class="legend-box level-3"></div>
                    <span>ãŠãŠã„</span>
                </div>
            </section>

            <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
            <section class="calendar-card">
                <div class="calendar-header">
                    <button id="prev-month">â—€</button>
                    <h3 id="calendar-title">2024å¹´1æœˆ</h3>
                    <button id="next-month">â–¶</button>
                </div>
                <div class="calendar-grid" id="calendar-grid"></div>
            </section>

            <!-- åŒ»å¸«ç”¨ãƒ‡ãƒ¼ã‚¿ -->
            <section class="report-card">
                <button class="report-btn" onclick="generateReport()">ğŸ“‹ åŒ»å¸«æç¤ºç”¨ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º</button>
            </section>

            <div style="font-size: 0.6rem; color: #ccc; margin-top: 30px; text-align: center;">
                App Version 8.5 (Form Order Updated)
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>

</html>